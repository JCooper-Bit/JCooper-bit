<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Lars Intro</title>
    <meta name="description" content="Welcome to the companion guides for the lars crate.

Alongside developing the crate itself, this series of articles is designed to help you build your own linear algebra functionality from the ground up. Each guide focuses on a small, well-defined task...">
    <meta property="og:image" content="../assets/img/lars.png">
    <link rel="stylesheet" href="../assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/css/styles.min.css">
</head>

<body>
    <nav class="navbar navbar-expand-md bg-body py-3">
        <div class="container"><a class="navbar-brand d-flex align-items-center" href="/"><span class="bs-icon-sm bs-icon-rounded bs-icon-primary d-flex justify-content-center align-items-center me-2 bs-icon"><img class="img-fluid" width="100" height="100" src="../assets/img/icons8-folder-100.png"></span><span>JayCee</span></a><button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-4"><span class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse flex-grow-0 order-md-first" id="navcol-4">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item"><a class="nav-link active" href="/">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="/projects">Projects</a></li>
                    <li class="nav-item"><a class="nav-link" href="/articles">Articles</a></li>
                </ul>
                <div class="d-md-none my-2"><button class="btn btn-light me-2" type="button">Button</button><button class="btn btn-primary" type="button">Button</button></div>
            </div>
            <div class="d-none d-md-block"><button class="btn btn-light me-2" type="/about">About</button><a class="btn btn-primary me-2" role="button" href="/contact">Contact</a><a class="btn btn-primary" role="button" href="https://www.github.com/JCooper-bit">Github</a></div>
        </div>
    </nav>
    <div class="row">
        <div class="col col-xl-12 offset-xl-0">
            <div class="container py-4 hero1">
                <h1><strong><span style="color: rgb(51, 51, 51);">LARS -&nbsp;Building a 2D Vector Type in Rust</span></strong></h1>
                <p>&nbsp;</p>
                <h4>Learning Goals</h4>
                <p><span style="color: rgb(51, 51, 51);">By the end of this lesson, students will:</span></p>
                <ul class="list-group">
                    <li class="list-group-item whitespace"><span><span style="color: rgb(51, 51, 51);">Understand how 2D vectors are represented mathematically and in code.</span></span></li>
                    <li class="list-group-item whitespace"><span><span style="color: rgb(51, 51, 51);">Implement a&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">Vec2</span><span style="color: rgb(51, 51, 51);">&nbsp;struct in Rust that supports basic vector operations.</span></span></li>
                    <li class="list-group-item whitespace"><span><span style="color: rgb(51, 51, 51);">Learn about traits, operator overloading, and code organization in a math-focused crate.</span></span></li>
                    <li class="list-group-item whitespace"><span><span style="color: rgb(51, 51, 51);">Write unit tests to validate mathematical correctness.</span></span></li>
                </ul>
                <p>&nbsp;</p>
                <h2>Background: What is a Vector?</h2>
                <p><span style="color: rgb(51, 51, 51);">As you hopefully know from school, a&nbsp;</span><strong><span style="color: rgb(51, 51, 51);">vector</span></strong><span style="color: rgb(51, 51, 51);">&nbsp;is a quantity that has both&nbsp;</span><strong><span style="color: rgb(51, 51, 51);">magnitude</span></strong><span style="color: rgb(51, 51, 51);">&nbsp;(length) and&nbsp;</span><strong><span style="color: rgb(51, 51, 51);">direction</span></strong><span style="color: rgb(51, 51, 51);">. If not, I will give you a whistlestop tour, or you can read an introductory article&nbsp;</span><a href="https://www.mathsisfun.com/algebra/vectors.html"><span style="color: rgb(65, 131, 196); background-color: initial;">here</span></a><span style="color: rgb(51, 51, 51);">.</span></p>
                <p><span style="color: rgb(51, 51, 51);">In 2D space, we have multiple ways to notate vectors, the main one I will use is "Column Notation", which shows a vector as:</span></p><img src="../assets/img/vec2/Vector_definition.png">
                <p><span style="color: rgb(51, 51, 51);">Another common way to represent vectors is using Unit Vectors and Components.</span></p>
                <p>&nbsp;</p>
                <h4>Unit Vectors</h4>
                <p><strong><span style="color: rgb(51, 51, 51);">Unit</span></strong><span style="color: rgb(51, 51, 51);">&nbsp;vectors are vectors that has a magnitude of 1 in a specific direction. for example:</span></p><img class="img-fluid" width="63" height="48" src="../assets/img/vec2/hat_definition.png">
                <p><span style="color: rgb(51, 51, 51);">Therefore, to express a vector with x-component 3 and y-component 4, with unit vectors, we can write:</span></p><img class="img-fluid" width="96" height="22" src="../assets/img/vec2/vector_with_unit_vectors.png">
                <p>&nbsp;</p>
                <h4>Magnitude</h4><img class="img-fluid" width="375" height="280" src="../assets/img/vectordecomp.webp">
                <p><strong><span style="color: rgb(51, 51, 51);">Magnitude</span></strong><span style="color: rgb(51, 51, 51);">&nbsp;(or length) of a vector is the distance from the origin to the point defined by the vector. As you should see from the diagram above, it is calculated using the Pythagorean theorem:</span></p><img class="img-fluid" width="130" height="24" src="../assets/img/vec2/magnitude_definition.png">
                <p>Where t<span style="color: rgb(51, 51, 51);">he notation for a vector V's magnitude is | V | .</span></p>
                <p>&nbsp;</p>
                <h4>Vector Addition and Subtraction</h4>
                <p><span style="color: rgb(51, 51, 51);">Vectors can be added and subtracted component-wise. For example, given two vectors:</span></p><img class="img-fluid" width="72" height="48" src="../assets/img/vec2/vector_a_definition.png"><img class="img-fluid vecb" width="72" height="48" src="../assets/img/vec2/vector_b_definition.png">
                <p><span style="color: rgb(51, 51, 51);">The addition and subtraction of these vectors is defined as:</span></p><img class="img-fluid" width="150" height="48" src="../assets/img/vec2/vector_addition.png"><img class="img-fluid vecsub" width="150" height="48" src="../assets/img/vec2/vector_subtraction.png">
                <p>&nbsp;</p>
                <h4><strong><span style="color: rgb(51, 51, 51);">Scalar Multiplication and Division</span></strong></h4>
                <p><span style="color: rgb(51, 51, 51);">Vectors can be multiplied or divided by a scalar (a single number) by multiplying or dividing each component of the vector by that scalar. For example, given a vector:</span></p><img class="img-fluid" width="72" height="48" src="../assets/img/vec2/vector_a_definition.png">
                <p><span style="color: rgb(51, 51, 51);">The scalar multiplication and division of this vector by a scalar k is defined as:</span></p><img class="img-fluid vec" width="134" height="48" src="../assets/img/vec2/scalar_multiplication.png"><img class="img-fluid vecsub" width="67" height="48" src="../assets/img/vec2/scalar_division.png">
                <p>&nbsp; &nbsp;</p>
                <h4><strong><span style="color: rgb(51, 51, 51);">The Dot Product</span></strong></h4>
                <p><span style="color: rgb(51, 51, 51);">The dot product is a method for multiplying 2 vectors, it is notated mathematically as follows:</span></p><img class="img-fluid" width="37" height="14" src="../assets/img/vec2/adotb.png">
                <p><span style="color: rgb(51, 51, 51);">There are 2 methods to calculate the dot product, this is the first:</span></p><img class="img-fluid" width="207" height="20" src="../assets/img/vec2/dot_product_1.png">
                <p>&nbsp; &nbsp;</p><img class="img-fluid" width="208" height="20" src="../assets/img/vec2/dot_product_1_2.png">
                <p>&nbsp; &nbsp;</p><img class="img-fluid" width="316" height="18" src="../assets/img/vec2/dot_product_1_3.png">
                <p>&nbsp; &nbsp;</p>
                <p><span style="color: rgb(51, 51, 51);">The second method:</span></p><img class="img-fluid" width="245" height="21" src="../assets/img/vec2/dot_product_2.png">
                <p>&nbsp; &nbsp;<br><span style="color: rgb(51, 51, 51);">Vectors are foundational in: - Geometry (lines, points, and normals)</span><br><span style="color: rgb(51, 51, 51);">- Physics (velocity, force, acceleration and pretty much everything else!)</span><br><span style="color: rgb(51, 51, 51);">- Computer graphics (movement, transformations)</span><br><span style="color: rgb(51, 51, 51);">- Game development (positions, rotations, collision detection)</span><br><br><span style="color: rgb(51, 51, 51);">Let us now take our first step towards creating a 2D vector struct in Rust!</span></p>
                <p>&nbsp; &nbsp;</p>
                <h4><strong><span style="color: rgb(51, 51, 51);">Task 1:</span></strong>&nbsp; Defining a 2D Vector Type</h4>
                <p><span style="color: rgb(51, 51, 51);">First off, we need to create a Rust struct called&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">Vec2</span><span style="color: rgb(51, 51, 51);">&nbsp;to represent a 2D vector.</span><br><span style="color: rgb(51, 51, 51);">&nbsp; &nbsp; -&nbsp; It should contain&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">(x,y)</span><span style="color: rgb(51, 51, 51);">&nbsp;variables</span><br><span style="color: rgb(51, 51, 51);">&nbsp; &nbsp; - You should&nbsp;</span><a href="https://doc.rust-lang.org/rust-by-example/trait/derive.html"><span style="color: rgb(65, 131, 196); background-color: initial;">Derive</span></a><span style="color: rgb(51, 51, 51);">&nbsp;common traits such as&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">Clone</span><span style="color: rgb(51, 51, 51);">,&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">Copy</span><span style="color: rgb(51, 51, 51);">,&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">Debug</span><span style="color: rgb(51, 51, 51);">,&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">PartialEq</span><span style="color: rgb(51, 51, 51);">&nbsp;and&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">Constructor</span><span style="color: rgb(51, 51, 51);">&nbsp;</span><br><span style="color: rgb(51, 51, 51);">&nbsp; &nbsp; - Finally, you should define a few useful common constant vectors such as&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">ZERO</span><span style="color: rgb(51, 51, 51);">,&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">ONE</span><span style="color: rgb(51, 51, 51);">&nbsp;and&nbsp;</span><strong><span style="color: rgb(51, 51, 51);">unit</span></strong><span style="color: rgb(51, 51, 51);">&nbsp;vectors for the x and y directions.</span><br><span style="color: rgb(51, 51, 51);">This sets the foundation for all vector operations.</span></p>
                <div><a class="btn btn-primary" data-bs-toggle="collapse" aria-expanded="false" aria-controls="collapse-1" href="#collapse-1" role="button">Solution</a>
                    <div class="collapse" id="collapse-1">
                        <p></p><code><span style="color: inherit; background-color: initial;">#[derive(Clone, Copy, Debug, PartialEq, PartialOrd, Constructor)]</span><br><span style="color: inherit; background-color: initial;">pub struct Vec2 {</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; pub x: f64,</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; pub y: f64,</span><br><span style="color: inherit; background-color: initial;">}</span><br><br><br><span style="color: inherit; background-color: initial;">impl Vec2 {</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; pub const ZERO: Vec2 = Vec2 { x: 0.0, y: 0.0 };</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; pub const ONE: Vec2 = Vec2 { x: 1.0, y: 1.0 };</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; pub const UNIT_X: Vec2 = Vec2 { x: 1.0, y: 0.0 };</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; pub const UNIT_Y: Vec2 = Vec2 { x: 0.0, y: 1.0 };</span><br><span style="color: inherit; background-color: initial;">}</span></code>
                    </div>
                </div>
                <p>&nbsp;&nbsp;<br><br></p>
                <h4><strong><span style="color: rgb(51, 51, 51);">Task 2:</span></strong>&nbsp;Computing Magnitude (Length)</h4>
                <p><span style="color: rgb(51, 51, 51);">Using the Pythagorean theorem, implement a method on&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">Vec2</span><span style="color: rgb(51, 51, 51);">&nbsp;to compute the magnitude (length) of the vector.</span></p>
                <div><a class="btn btn-primary" data-bs-toggle="collapse" aria-expanded="false" aria-controls="collapse-9" href="#collapse-9" role="button">Solution</a>
                    <div class="collapse" id="collapse-9">
                        <p></p><code><span style="color: inherit; background-color: initial;">impl Vec2 {</span><br><span style="color: inherit; background-color: initial;"> pub fn mag(&amp;self) -&gt; f64 {</span><br><span style="color: inherit; background-color: initial;"> (self.x * self.x + self.y * self.y).sqrt()</span><br><span style="color: inherit; background-color: initial;"> }</span><br><span style="color: inherit; background-color: initial;">}</span></code>
                    </div>
                </div>
                <p>&nbsp;&nbsp;<br><br></p>
                <h4><strong><span style="color: rgb(51, 51, 51);">Task 3:</span></strong>&nbsp;Vector Arithmetic</h4>
                <p><span style="color: rgb(51, 51, 51);">Using rusts operator overloading capabilities, implement addition and subtraction for&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">Vec2</span><span style="color: rgb(51, 51, 51);">&nbsp;so that you can add and subtract vectors using the&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">+</span><span style="color: rgb(51, 51, 51);">&nbsp;and&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">-</span><span style="color: rgb(51, 51, 51);">&nbsp;operators.</span><br><span style="color: rgb(51, 51, 51);">I would recommend using the&nbsp;</span><a href="https://crates.io/crates/derive_more"><span style="color: rgb(65, 131, 196); background-color: initial;">derive_more</span></a><span style="color: rgb(51, 51, 51);">&nbsp;crate to make this easier.</span></p>
                <div><a class="btn btn-primary" data-bs-toggle="collapse" aria-expanded="false" aria-controls="collapse-8" href="#collapse-8" role="button">Solution</a>
                    <div class="collapse" id="collapse-8">
                        <p></p><code><span style="color: inherit; background-color: initial;">// Using Derive more for operator overloading</span><br><br><span style="color: inherit; background-color: initial;">use derive_more::{Add, Sub};</span><br><br><span style="color: inherit; background-color: initial;">#[derive(Add, Sub, Div, Mul, Neg, Clone, Copy, Debug, PartialEq, PartialOrd, Constructor)] // The same as Task 1 but withAdd and Sub traits</span><br><span style="color: inherit; background-color: initial;">pub struct Vec2 {</span><br><span style="color: inherit; background-color: initial;"> pub x: f64,</span><br><span style="color: inherit; background-color: initial;"> pub y: f64,</span><br><span style="color: inherit; background-color: initial;">}</span><br><br><span style="color: inherit; background-color: initial;">// Manually implementing traits if not using derive_more</span><br><br><span style="color: inherit; background-color: initial;">impl std::ops::Add for Vec2 {</span><br><span style="color: inherit; background-color: initial;"> type Output = Vec2;</span><br><span style="color: inherit; background-color: initial;"> fn add(self, other: Vec2) -&gt; Vec2 {</span><br><span style="color: inherit; background-color: initial;"> Vec2 {</span><br><span style="color: inherit; background-color: initial;"> x: self.x + other.x,</span><br><span style="color: inherit; background-color: initial;"> y: self.y + other.y,</span><br><span style="color: inherit; background-color: initial;"> }</span><br><span style="color: inherit; background-color: initial;"> }</span><br><span style="color: inherit; background-color: initial;">}</span><br><span style="color: inherit; background-color: initial;">impl std::ops::Sub for Vec2 {</span><br><span style="color: inherit; background-color: initial;"> type Output = Vec2;</span><br><span style="color: inherit; background-color: initial;"> fn sub(self, other: Vec2) -&gt; Vec2 {</span><br><span style="color: inherit; background-color: initial;"> Vec2 {</span><br><span style="color: inherit; background-color: initial;"> x: self.x - other.x,</span><br><span style="color: inherit; background-color: initial;"> y: self.y - other.y,</span><br><span style="color: inherit; background-color: initial;"> }</span><br><span style="color: inherit; background-color: initial;"> }</span><br><span style="color: inherit; background-color: initial;">}</span></code>
                    </div>
                </div>
                <p>&nbsp;&nbsp;<br><br></p>
                <h4><strong><span style="color: rgb(51, 51, 51);">Task 4:</span></strong>&nbsp; The Dot Product</h4>
                <p><span style="color: rgb(51, 51, 51);">Implement a method on&nbsp;</span><span style="color: rgb(51, 51, 51); background-color: rgb(247, 247, 247);">Vec2</span><span style="color: rgb(51, 51, 51);">&nbsp;to compute the dot product between two vectors as we defined earlier. I recommend implementing this as a method called&nbsp;</span><span style="color: rgb(51, 51, 51); background-color: rgb(247, 247, 247);">dot</span><span style="color: rgb(51, 51, 51);">&nbsp;that takes &amp;self and another&nbsp;</span><span style="color: rgb(51, 51, 51); background-color: rgb(247, 247, 247);">Vec2</span><span style="color: rgb(51, 51, 51);">&nbsp;as an argument and returns a&nbsp;</span><span style="color: rgb(51, 51, 51); background-color: rgb(247, 247, 247);">f64</span><span style="color: rgb(51, 51, 51);">.</span></p>
                <div><a class="btn btn-primary" data-bs-toggle="collapse" aria-expanded="false" aria-controls="collapse-7" href="#collapse-7" role="button">Solution</a>
                    <div class="collapse" id="collapse-7">
                        <p></p><code><span style="color: inherit; background-color: initial;">pub fn dot(&amp;self, other: &amp;Vec2) -&gt; f64 {</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; (self.x * other.x) + (self.y * other.y) // Method Two</span><br><span style="color: inherit; background-color: initial;"> }</span></code>
                    </div>
                </div>
                <p>&nbsp;&nbsp;<br><br></p>
                <h4><strong><span style="color: rgb(51, 51, 51);">Task 5:</span></strong>&nbsp; Component Mapping</h4>
                <p><span style="color: rgb(51, 51, 51);">Implement a method on&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">Vec2</span><span style="color: rgb(51, 51, 51);">&nbsp;called&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">map</span><span style="color: rgb(51, 51, 51);">&nbsp;that takes a closure as an argument. This closure should take a single&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">f64</span><span style="color: rgb(51, 51, 51);">&nbsp;and return a&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">f64</span><span style="color: rgb(51, 51, 51);">. The&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">map</span><span style="color: rgb(51, 51, 51);">&nbsp;method should apply this closure to both the x and y components of the vector and return a new&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">Vec2</span><span style="color: rgb(51, 51, 51);">&nbsp;with the results.</span><br><br><span style="color: rgb(51, 51, 51);">Mathematically speaking, we are applying a function "f" to each component of the vector.</span></p>
                <div><a class="btn btn-primary" data-bs-toggle="collapse" aria-expanded="true" aria-controls="collapse-6" href="#collapse-6" role="button">Solution</a>
                    <div class="collapse show" id="collapse-6">
                        <p></p><code><span style="color: inherit; background-color: initial;">pub fn map&lt;F&gt;(&amp;self, f: F) -&gt; Vec2</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp;where</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp;F: Fn(f64) -&gt; f64,</span><br><span style="color: inherit; background-color: initial;"> {</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; let fx = f(self.x);</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; let fy = f(self.y);</span><br><span style="color: inherit; background-color: initial;"> Vec2 { x: fx, y: fy }</span><br><span style="color: inherit; background-color: initial;"> }</span></code>
                    </div>
                </div>
                <p>&nbsp;&nbsp;<br><br></p>
                <h4><strong><span style="color: rgb(51, 51, 51);">Task 6:</span></strong>&nbsp; Normalising a Vector</h4>
                <p><span style="color: rgb(51, 51, 51);">Normalizing a vector means scaling it to have a magnitude of 1 while maintaining its direction. Implement a method on&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">Vec2</span><span style="color: rgb(51, 51, 51);">&nbsp;called&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">normalize</span><span style="color: rgb(51, 51, 51);">&nbsp;that returns a new&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">Vec2</span><span style="color: rgb(51, 51, 51);">&nbsp;that is the normalized version of the original vector.</span><br><br><span style="color: rgb(51, 51, 51);">The map function from Task 5 may be useful here.</span></p>
                <div><a class="btn btn-primary" data-bs-toggle="collapse" aria-expanded="true" aria-controls="collapse-5" href="#collapse-5" role="button">Solution</a>
                    <div class="collapse show" id="collapse-5">
                        <p></p><code><span style="color: inherit; background-color: initial;">pub fn normalize(&amp;self) -&gt; Vec2 {</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; let m = self.mag();</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; if m == 0.0 {</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; &nbsp; &nbsp; return Vec2::ZERO; // or handle zero-length vector case as needed</span><br><span style="color: inherit; background-color: initial;"> }</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; self.map(|i| i / m)</span><br><span style="color: inherit; background-color: initial;">}</span></code>
                    </div>
                </div>
                <p>&nbsp;&nbsp;<br><br></p>
                <h4><strong><span style="color: rgb(51, 51, 51);">Task 7:</span></strong>&nbsp; Scalar Multiplication and Division</h4>
                <p><span style="color: rgb(51, 51, 51);">Implement scalar multiplication and division for&nbsp;</span><span style="color: rgb(51, 51, 51); background-color: rgb(247, 247, 247);">Vec2</span><span style="color: rgb(51, 51, 51);">&nbsp;so that you can multiply and divide a vector by a scalar using the&nbsp;</span><span style="color: rgb(51, 51, 51); background-color: rgb(247, 247, 247);">*</span><span style="color: rgb(51, 51, 51);">&nbsp;and&nbsp;</span><span style="color: rgb(51, 51, 51); background-color: rgb(247, 247, 247);">/</span><span style="color: rgb(51, 51, 51);">&nbsp;operators. </span><br><br><span style="color: rgb(51, 51, 51);">You can use the&nbsp;</span><a href="https://crates.io/crates/derive_more"><span style="color: rgb(65, 131, 196);">derive_more</span></a><span style="color: rgb(51, 51, 51);">&nbsp;crate again to make this easier.</span></p>
                <div><a class="btn btn-primary" data-bs-toggle="collapse" aria-expanded="true" aria-controls="collapse-4" href="#collapse-4" role="button">Solution</a>
                    <div class="collapse show" id="collapse-4">
                        <p></p><code><span style="color: inherit; background-color: initial;">// With derive_more</span><br><span style="color: inherit; background-color: initial;">use derive_more::{Mul, Div, Add, Sub};</span><br><br><span style="color: inherit; background-color: initial;">#[derive(Add, Sub, Div, Mul, Clone, Copy, Debug, PartialEq, PartialOrd, Constructor)]</span><br><span style="color: inherit; background-color: initial;">pub struct Vec2 {</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; pub x: f64,</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; pub y: f64</span><br><span style="color: inherit; background-color: initial;">}</span><br><br><span style="color: inherit; background-color: initial;">// Without derive_more</span><br><br><span style="color: inherit; background-color: initial;">impl std::ops::Mul&lt;f64&gt; for Vec2 {</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; type Output = Vec2;</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; fn mul(self, scalar: f64) -&gt; Vec2 {</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; &nbsp; &nbsp; Vec2 {</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x: self.x * scalar,</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; y: self.y * scalar,</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; &nbsp; &nbsp; }</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; }</span><br><span style="color: inherit; background-color: initial;">}</span><br><span style="color: inherit; background-color: initial;">impl std::ops::Div&lt;f64&gt; for Vec2 {</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; type Output = Vec2;</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; fn div(self, scalar: f64) -&gt; Vec2 {</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; &nbsp; &nbsp; Vec2 {</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x: self.x / scalar,</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; y: self.y / scalar,</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; &nbsp; &nbsp; }</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; }</span><br><span style="color: inherit; background-color: initial;">}</span></code>
                    </div>
                </div>
                <p>&nbsp;&nbsp;<br><br></p>
                <h4><strong><span style="color: rgb(51, 51, 51);">Task 8:</span></strong>&nbsp; Using Vec2 as a point</h4>
                <p><span style="color: rgb(51, 51, 51);">In many applications, 2D vectors are used to represent points in space. </span><br><span style="color: rgb(51, 51, 51);">We should implement a method on&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">Vec2</span><span style="color: rgb(51, 51, 51);">&nbsp;called&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">dist</span><span style="color: rgb(51, 51, 51);">&nbsp;that takes another&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">Vec2</span><span style="color: rgb(51, 51, 51);">&nbsp;as an argument and returns the distance between the two points represented by the vectors.</span><br><span style="color: rgb(51, 51, 51);">Perhaps we could also add an alias type of Vec2 called&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">Point2, just&nbsp;</span><span style="color: rgb(51, 51, 51);">to make the intent clearer when it is being used as a point</span></p>
                <div><a class="btn btn-primary" data-bs-toggle="collapse" aria-expanded="true" aria-controls="collapse-3" href="#collapse-3" role="button">Solution</a>
                    <div class="collapse show" id="collapse-3">
                        <p></p><code><span style="color: inherit; background-color: initial;">pub fn dist(&amp;self, other: &amp;Point2D) -&gt; f64 {</span><br><span style="color: inherit; background-color: initial;">&nbsp; &nbsp; (*self - *other).mag().abs()</span><br><span style="color: inherit; background-color: initial;"> }</span><br>...<br><br><span style="color: inherit; background-color: initial;">pub type Point2D = Vec2;</span></code>
                    </div>
                </div>
                <p>&nbsp;&nbsp;<br><br></p>
                <h4><strong><span style="color: rgb(51, 51, 51);">Task 9:</span></strong>&nbsp; Testing and Validation</h4>
                <p><span style="color: rgb(51, 51, 51);">Write&nbsp;</span><a href="https://doc.rust-lang.org/rust-by-example/testing/unit_testing.html"><span style="color: rgb(65, 131, 196);">unit tests</span></a><span style="color: rgb(51, 51, 51);">&nbsp;for all the methods and operator overloads you have implemented for&nbsp;</span><span style="color: rgb(51, 51, 51); background-color: rgb(247, 247, 247);">Vec2</span><span style="color: rgb(51, 51, 51);">. Ensure that your tests cover various cases, including edge cases like zero-length vectors.</span></p>
                <div><a class="btn btn-primary" data-bs-toggle="collapse" aria-expanded="false" aria-controls="collapse-2" href="#collapse-2" role="button">Solution</a>
                    <div class="collapse" id="collapse-2">
                        <p></p><code><span style="color: inherit; background-color: initial;">#[cfg(test)]</span><br><span style="color: inherit; background-color: initial;">mod tests {</span><br><span style="color: inherit; background-color: initial;"> use super::*;</span><br><span style="color: inherit; background-color: initial;"> #[test]</span><br><span style="color: inherit; background-color: initial;"> fn test_add() {</span><br><span style="color: inherit; background-color: initial;"> let v1 = Vec2::ZERO;</span><br><span style="color: inherit; background-color: initial;"> let v2 = Vec2::ONE;</span><br><span style="color: inherit; background-color: initial;"> assert_eq!(v1 + v2, Vec2::ONE);</span><br><span style="color: inherit; background-color: initial;"> }</span><br><br><span style="color: inherit; background-color: initial;"> #[test]</span><br><span style="color: inherit; background-color: initial;"> fn test_sub() {</span><br><span style="color: inherit; background-color: initial;"> let v1 = Vec2::new(5.0, 7.0);</span><br><span style="color: inherit; background-color: initial;"> let v2 = Vec2::new(2.0, 3.0);</span><br><span style="color: inherit; background-color: initial;"> assert_eq!(v1 - v2, Vec2::new(3.0, 4.0));</span><br><span style="color: inherit; background-color: initial;"> }</span><br><br><span style="color: inherit; background-color: initial;"> #[test]</span><br><span style="color: inherit; background-color: initial;"> fn test_mag() {</span><br><span style="color: inherit; background-color: initial;"> let v = Vec2::new(3.0, 4.0);</span><br><span style="color: inherit; background-color: initial;"> assert_eq!(v.mag(), 5.0);</span><br><span style="color: inherit; background-color: initial;"> }</span><br><br><br><span style="color: inherit; background-color: initial;"> #[test]</span><br><span style="color: inherit; background-color: initial;"> fn test_dot() {</span><br><span style="color: inherit; background-color: initial;"> let a = Vec2::new(1.0, 2.0);</span><br><span style="color: inherit; background-color: initial;"> let b = Vec2::new(3.0, 4.0);</span><br><span style="color: inherit; background-color: initial;"> assert_eq!(a.dot(&amp;b), 11.0);</span><br><span style="color: inherit; background-color: initial;"> }</span><br><br><span style="color: inherit; background-color: initial;"> #[test]</span><br><span style="color: inherit; background-color: initial;"> fn test_map() {</span><br><span style="color: inherit; background-color: initial;"> let v = Vec2::new(1.0, 2.0);</span><br><span style="color: inherit; background-color: initial;"> let mapped = v.map(|x| x * 2.0);</span><br><span style="color: inherit; background-color: initial;"> assert_eq!(mapped, Vec2::new(2.0, 4.0));</span><br><span style="color: inherit; background-color: initial;"> }</span><br><br><span style="color: inherit; background-color: initial;"> #[test]</span><br><span style="color: inherit; background-color: initial;"> fn test_normalize() {</span><br><span style="color: inherit; background-color: initial;"> let v = Vec2::new(3.0, 4.0);</span><br><span style="color: inherit; background-color: initial;"> let n = v.normalize();</span><br><span style="color: inherit; background-color: initial;"> assert!((n.mag() - 1.0).abs() &lt; 1e-10);</span><br><span style="color: inherit; background-color: initial;"> }</span><br><br><span style="color: inherit; background-color: initial;"> #[test]</span><br><span style="color: inherit; background-color: initial;"> fn test_scalar_mul() {</span><br><span style="color: inherit; background-color: initial;"> let v = Vec2::new(1.0, 2.0);</span><br><span style="color: inherit; background-color: initial;"> assert_eq!(2.0 * v, Vec2::new(2.0, 4.0));</span><br><span style="color: inherit; background-color: initial;"> }</span><br><br><span style="color: inherit; background-color: initial;"> #[test]</span><br><span style="color: inherit; background-color: initial;"> fn test_scalar_div() {</span><br><span style="color: inherit; background-color: initial;"> let v = Vec2::new(2.0, 4.0);</span><br><span style="color: inherit; background-color: initial;"> assert_eq!(v / 2.0, Vec2::new(1.0, 2.0));</span><br><span style="color: inherit; background-color: initial;"> }</span><br><br><span style="color: inherit; background-color: initial;"> #[test]</span><br><span style="color: inherit; background-color: initial;"> fn test_dist() {</span><br><span style="color: inherit; background-color: initial;"> let a = Point2D::new(1.0, 2.0);</span><br><span style="color: inherit; background-color: initial;"> let b = Point2D::new(1.0, 0.0);</span><br><span style="color: inherit; background-color: initial;"> assert_eq!(a.dist(&amp;b), 2.0);</span><br><span style="color: inherit; background-color: initial;"> }</span><br><br><span style="color: inherit; background-color: initial;"> #[test]</span><br><span style="color: inherit; background-color: initial;"> fn test_zero_length_normalize() {</span><br><span style="color: inherit; background-color: initial;"> let v = Vec2::ZERO;</span><br><span style="color: inherit; background-color: initial;"> let n = v.normalize();</span><br><span style="color: inherit; background-color: initial;"> assert_eq!(n, Vec2::ZERO); // or however you choose to handle this case</span><br><span style="color: inherit; background-color: initial;"> }</span><br><br><span style="color: inherit; background-color: initial;"> #[test]</span><br><span style="color: inherit; background-color: initial;"> fn test_dot_perpendicular() {</span><br><span style="color: inherit; background-color: initial;"> let a = Vec2::UNIT_X;</span><br><span style="color: inherit; background-color: initial;"> let b = Vec2::UNIT_Y;</span><br><span style="color: inherit; background-color: initial;"> assert_eq!(a.dot(&amp;b), 0.0);</span><br><span style="color: inherit; background-color: initial;"> }</span><br><br><span style="color: inherit; background-color: initial;">// You can add more tests as needed, such as ones for commutativity, associativity, etc.</span><br><span style="color: inherit; background-color: initial;">}</span></code>
                    </div>
                </div>
                <p>&nbsp;&nbsp;<br><br></p>
                <h4><strong><span style="color: rgb(51, 51, 51);">Conclusion and Next Steps</span></strong></h4>
                <p><span style="color: rgb(51, 51, 51);">Congratulations! You have successfully implemented a basic 2D vector type in Rust with essential operations and tests. </span><br><span style="color: rgb(51, 51, 51);">This&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">Vec2</span><span style="color: rgb(51, 51, 51);">&nbsp;struct can now serve as a foundation for more complex mathematical operations and applications in graphics, physics, and game development.</span><br><br><span style="color: rgb(51, 51, 51);">As next steps, consider exploring:</span><br><span style="color: rgb(51, 51, 51);">&nbsp;- Implementing additional vector operations such as the 2D cross product, angle between vectors, and projection.</span><br><span style="color: rgb(51, 51, 51);">- Extending the&nbsp;</span><span style="color: inherit; background-color: rgb(247, 247, 247);">Vec2</span><span style="color: rgb(51, 51, 51);">&nbsp;struct to support more advanced features like interpolation (lerp)</span><br><br><span style="color: rgb(51, 51, 51);">In the next part of this series, we will build upon this foundation to create a 3D vector type, improve our 2D vector slightly and explore more complex mathematical concepts.</span><br><br><span style="color: rgb(51, 51, 51);">The code and ideas for this series is based on my&nbsp;</span><strong><span style="color: rgb(51, 51, 51);">lars</span></strong><span style="color: rgb(51, 51, 51);">&nbsp;maths crate, which you can find on&nbsp;</span><a href="https://github.com/JCooper-Bit/lars"><span style="color: rgb(65, 131, 196); background-color: initial;">GitHub</span></a></p>
                <h3><strong><span style="color: rgb(51, 51, 51);">About the Author</span></strong></h3><img class="img-fluid aspect-ratio-16x9" src="../assets/img/JayCeelogo.png" width="300" height="200">
                <p><strong><span style="color: rgb(51, 51, 51);">J. Cooper</span></strong><span style="color: rgb(51, 51, 51);">&nbsp;(JayCee) is a software developer, Maths enthusiast and musician based in the UK. They are the creator and maintainer of the lars crate and they have various other projects in progress</span></p>
                <p><strong><span style="color: rgb(51, 51, 51);">GitHub</span></strong><span style="color: rgb(51, 51, 51);">:&nbsp;</span><a href="https://github.com/JCooper-Bit"><span style="color: rgb(65, 131, 196); background-color: initial;">@JCooper-Bit</span></a></p>
                <p><strong><span style="color: rgb(51, 51, 51);">Project Repo</span></strong><span style="color: rgb(51, 51, 51);">:&nbsp;</span><a href="https://github.com/JCooper-Bit/lars"><span style="color: rgb(65, 131, 196); background-color: initial;">lars on GitHub</span></a></p>
            </div>
        </div>
    </div>
    <script src="../assets/bootstrap/js/bootstrap.min.js"></script>
</body>

</html>